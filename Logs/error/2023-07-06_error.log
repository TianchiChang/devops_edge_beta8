{"asctime": "[2023-07-06 17:35:31 -0700]", "process": 26748, "levelname": "ERROR", "message": "Exception occurred while handling uri: 'ws://localhost:82/device_login'", "exc_info": "Traceback (most recent call last):\n  File \"handle_request\", line 62, in handle_request\n    from sanic.models.futures import (\n  File \"_run_request_middleware\", line 28, in _run_request_middleware\n    Awaitable,\n  File \"edge_service.py\", line 25, in token_auth\n    device_id = request.body.decode(\"utf-8\")[\"device_id\"]\nTypeError: string indices must be integers"}
{"asctime": "[2023-07-06 18:01:38 -0700]", "process": 26823, "levelname": "ERROR", "message": "Exception occurred while handling uri: 'ws://localhost:82/device_login'", "exc_info": "Traceback (most recent call last):\n  File \"/usr/local/lib/python3.8/dist-packages/sanic/app.py\", line 891, in _websocket_handler\n    await fut\n  File \"edge_service.py\", line 142, in device_login\n    logger.info('device log out, device_id: {}'.format(device_id))\nUnboundLocalError: local variable 'device_id' referenced before assignment"}
{"asctime": "[2023-07-06 18:07:35 -0700]", "process": 26861, "levelname": "ERROR", "message": "Exception occurred while handling uri: 'ws://localhost:82/device_login'", "exc_info": "Traceback (most recent call last):\n  File \"/usr/local/lib/python3.8/dist-packages/sanic/app.py\", line 891, in _websocket_handler\n    await fut\n  File \"edge_service.py\", line 143, in device_login\n    logger.info('device log out, device_id: {}'.format(device_id))\nUnboundLocalError: local variable 'device_id' referenced before assignment"}
{"asctime": "[2023-07-06 18:09:50 -0700]", "process": 26884, "levelname": "ERROR", "message": "Exception occurred while handling uri: 'ws://localhost:82/device_login'", "exc_info": "Traceback (most recent call last):\n  File \"/usr/local/lib/python3.8/dist-packages/sanic/app.py\", line 891, in _websocket_handler\n    await fut\n  File \"edge_service.py\", line 144, in device_login\n    asyncio.run(device_control_update(device_id=device_id, action=\"logout\"))\n  File \"/usr/lib/python3.8/asyncio/runners.py\", line 33, in run\n    raise RuntimeError(\nRuntimeError: asyncio.run() cannot be called from a running event loop"}
{"asctime": "[2023-07-06 18:16:44 -0700]", "process": 26912, "levelname": "ERROR", "message": "Exception occurred while handling uri: 'ws://localhost:82/device_login'", "exc_info": "Traceback (most recent call last):\n  File \"/usr/local/lib/python3.8/dist-packages/sanic/app.py\", line 891, in _websocket_handler\n    await fut\n  File \"edge_service.py\", line 146, in device_login\n    asyncio.run(device_control_update(device_id=device_id, action=\"logout\"))\n  File \"/usr/lib/python3.8/asyncio/runners.py\", line 33, in run\n    raise RuntimeError(\nRuntimeError: asyncio.run() cannot be called from a running event loop"}
{"asctime": "[2023-07-06 18:20:12 -0700]", "process": 26943, "levelname": "ERROR", "message": "Exception occurred while handling uri: 'ws://localhost:82/device_login'", "exc_info": "Traceback (most recent call last):\n  File \"/usr/local/lib/python3.8/dist-packages/sanic/app.py\", line 891, in _websocket_handler\n    await fut\n  File \"edge_service.py\", line 146, in device_login\n    logger.info('device log out, device_id: {}'.format(device_id))\nUnboundLocalError: local variable 'device_id' referenced before assignment"}
{"asctime": "[2023-07-06 18:24:28 -0700]", "process": 26969, "levelname": "ERROR", "message": "Exception occurred while handling uri: 'ws://localhost:82/device_login'", "exc_info": "Traceback (most recent call last):\n  File \"/usr/local/lib/python3.8/dist-packages/sanic/app.py\", line 891, in _websocket_handler\n    await fut\n  File \"edge_service.py\", line 147, in device_login\n    asyncio.run(device_control_update(device_id=device_id, action=\"logout\"))\n  File \"/usr/lib/python3.8/asyncio/runners.py\", line 33, in run\n    raise RuntimeError(\nRuntimeError: asyncio.run() cannot be called from a running event loop"}
{"asctime": "[2023-07-06 18:34:29 -0700]", "process": 27057, "levelname": "ERROR", "message": "Exception occurred while handling uri: 'ws://localhost:82/device_login'", "exc_info": "Traceback (most recent call last):\n  File \"/usr/local/lib/python3.8/dist-packages/sanic/app.py\", line 891, in _websocket_handler\n    await fut\n  File \"edge_service.py\", line 149, in device_login\n    asyncio.run(device_control_update(device_id=device_id, action=\"logout\"))\n  File \"/usr/lib/python3.8/asyncio/runners.py\", line 33, in run\n    raise RuntimeError(\nRuntimeError: asyncio.run() cannot be called from a running event loop"}
{"asctime": "[2023-07-06 18:37:42 -0700]", "process": 27081, "levelname": "ERROR", "message": "Exception occurred while handling uri: 'ws://localhost:82/device_login'", "exc_info": "Traceback (most recent call last):\n  File \"/usr/local/lib/python3.8/dist-packages/sanic/app.py\", line 891, in _websocket_handler\n    await fut\n  File \"edge_service.py\", line 147, in device_login\n    logger.info('device log out, device_id: {}'.format(device_id))\nNameError: name 'device_id' is not defined"}
{"asctime": "[2023-07-06 18:38:41 -0700]", "process": 27102, "levelname": "ERROR", "message": "Exception occurred while handling uri: 'ws://localhost:82/device_login'", "exc_info": "Traceback (most recent call last):\n  File \"/usr/local/lib/python3.8/dist-packages/sanic/app.py\", line 891, in _websocket_handler\n    await fut\n  File \"edge_service.py\", line 147, in device_login\n    logger.info('device log out, device_id: {}'.format(device_id))\nNameError: name 'device_id' is not defined"}
{"asctime": "[2023-07-06 18:43:37 -0700]", "process": 27126, "levelname": "ERROR", "message": "Exception occurred while handling uri: 'ws://localhost:82/device_login'", "exc_info": "Traceback (most recent call last):\n  File \"/usr/local/lib/python3.8/dist-packages/sanic/app.py\", line 891, in _websocket_handler\n    await fut\n  File \"edge_service.py\", line 147, in device_login\n    logger.info('device log out, device_id: {}'.format(device_id))\nNameError: name 'device_id' is not defined"}
{"asctime": "[2023-07-06 18:46:25 -0700]", "process": 27167, "levelname": "ERROR", "message": "Exception occurred while handling uri: 'ws://localhost:82/device_login'", "exc_info": "Traceback (most recent call last):\n  File \"/usr/local/lib/python3.8/dist-packages/sanic/app.py\", line 891, in _websocket_handler\n    await fut\n  File \"edge_service.py\", line 145, in device_login\n    logger.info('device log out, device_id: {}'.format(device_id))\nNameError: name 'device_id' is not defined"}
{"asctime": "[2023-07-06 18:47:29 -0700]", "process": 27188, "levelname": "ERROR", "message": "Exception occurred while handling uri: 'ws://localhost:82/device_login'", "exc_info": "Traceback (most recent call last):\n  File \"/usr/local/lib/python3.8/dist-packages/sanic/app.py\", line 891, in _websocket_handler\n    await fut\n  File \"edge_service.py\", line 146, in device_login\n    asyncio.run(device_control_update(device_id=device_id, action=\"logout\"))\n  File \"/usr/lib/python3.8/asyncio/runners.py\", line 33, in run\n    raise RuntimeError(\nRuntimeError: asyncio.run() cannot be called from a running event loop"}
{"asctime": "[2023-07-06 18:49:31 -0700]", "process": 27212, "levelname": "ERROR", "message": "Exception occurred while handling uri: 'ws://localhost:82/device_login'", "exc_info": "Traceback (most recent call last):\n  File \"/usr/local/lib/python3.8/dist-packages/sanic/app.py\", line 891, in _websocket_handler\n    await fut\n  File \"edge_service.py\", line 146, in device_login\n    asyncio.run(device_control_update(device_id=device_id, action=\"logout\"))\n  File \"/usr/lib/python3.8/asyncio/runners.py\", line 33, in run\n    raise RuntimeError(\nRuntimeError: asyncio.run() cannot be called from a running event loop"}
{"asctime": "[2023-07-06 18:57:41 -0700]", "process": 27246, "levelname": "ERROR", "message": "Exception occurred while handling uri: 'ws://localhost:82/device_login'", "exc_info": "Traceback (most recent call last):\n  File \"/usr/local/lib/python3.8/dist-packages/sanic/app.py\", line 891, in _websocket_handler\n    await fut\n  File \"edge_service.py\", line 146, in device_login\n    asyncio.run(device_control_update(device_id=device_id, action=\"logout\"))\n  File \"/usr/lib/python3.8/asyncio/runners.py\", line 33, in run\n    raise RuntimeError(\nRuntimeError: asyncio.run() cannot be called from a running event loop"}
{"asctime": "[2023-07-06 19:01:50 -0700]", "process": 27273, "levelname": "ERROR", "message": "Exception occurred while handling uri: 'ws://localhost:82/device_login'", "exc_info": "Traceback (most recent call last):\n  File \"/usr/local/lib/python3.8/dist-packages/sanic/app.py\", line 891, in _websocket_handler\n    await fut\n  File \"edge_service.py\", line 146, in device_login\n    asyncio.run(device_control_update(device_id=device_id, action=\"logout\"))\n  File \"/usr/lib/python3.8/asyncio/runners.py\", line 33, in run\n    raise RuntimeError(\nRuntimeError: asyncio.run() cannot be called from a running event loop"}
{"asctime": "[2023-07-06 19:03:12 -0700]", "process": 27296, "levelname": "ERROR", "message": "Exception occurred while handling uri: 'ws://localhost:82/device_login'", "exc_info": "Traceback (most recent call last):\n  File \"/usr/local/lib/python3.8/dist-packages/sanic/app.py\", line 891, in _websocket_handler\n    await fut\n  File \"edge_service.py\", line 146, in device_login\n    asyncio.run(device_control_update(device_id=device_id, action=\"logout\"))\n  File \"/usr/lib/python3.8/asyncio/runners.py\", line 33, in run\n    raise RuntimeError(\nRuntimeError: asyncio.run() cannot be called from a running event loop"}
{"asctime": "[2023-07-06 19:04:14 -0700]", "process": 27317, "levelname": "ERROR", "message": "Exception occurred while handling uri: 'ws://localhost:82/device_login'", "exc_info": "Traceback (most recent call last):\n  File \"/usr/local/lib/python3.8/dist-packages/sanic/app.py\", line 891, in _websocket_handler\n    await fut\n  File \"edge_service.py\", line 146, in device_login\n    asyncio.run(device_control_update(device_id=device_id, action=\"logout\"))\n  File \"/usr/lib/python3.8/asyncio/runners.py\", line 33, in run\n    raise RuntimeError(\nRuntimeError: asyncio.run() cannot be called from a running event loop"}
{"asctime": "[2023-07-06 19:05:01 -0700]", "process": 27338, "levelname": "ERROR", "message": "Exception occurred while handling uri: 'ws://localhost:82/device_login'", "exc_info": "Traceback (most recent call last):\n  File \"edge_service.py\", line 132, in device_login\n    resp = await ws.recv()\n  File \"/usr/local/lib/python3.8/dist-packages/sanic/server/websockets/impl.py\", line 521, in recv\n    done, pending = await asyncio.wait(\n  File \"/usr/lib/python3.8/asyncio/tasks.py\", line 426, in wait\n    return await _wait(fs, timeout, return_when, loop)\n  File \"/usr/lib/python3.8/asyncio/tasks.py\", line 534, in _wait\n    await waiter\nasyncio.exceptions.CancelledError\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.8/dist-packages/sanic/app.py\", line 891, in _websocket_handler\n    await fut\n  File \"edge_service.py\", line 146, in device_login\n    asyncio.run(device_control_update(device_id=device_id, action=\"logout\"))\n  File \"/usr/lib/python3.8/asyncio/runners.py\", line 33, in run\n    raise RuntimeError(\nRuntimeError: asyncio.run() cannot be called from a running event loop"}
{"asctime": "[2023-07-06 19:08:52 -0700]", "process": 27377, "levelname": "ERROR", "message": "Exception occurred while handling uri: 'ws://localhost:82/device_login'", "exc_info": "Traceback (most recent call last):\n  File \"/usr/local/lib/python3.8/dist-packages/sanic/app.py\", line 891, in _websocket_handler\n    await fut\n  File \"edge_service.py\", line 147, in device_login\n    asyncio.run(device_control_update(device_id=device_id, action=\"logout\"))\n  File \"/usr/lib/python3.8/asyncio/runners.py\", line 33, in run\n    raise RuntimeError(\nRuntimeError: asyncio.run() cannot be called from a running event loop"}
